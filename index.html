<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Sesli YZ Sohbet Botu</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #101010;
      color: white;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .avatar {
      margin-top: 40px;
      position: relative;
      width: 150px;
      height: 150px;
      margin-left: auto;
      margin-right: auto;
    }
    .face {
      background: #222;
      border-radius: 50%;
      width: 100%;
      height: 100%;
      position: relative;
    }
    .eye {
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 40px;
      animation: blink 6s infinite;
    }
    .eye.left { left: 35px; }
    .eye.right { right: 35px; }
    @keyframes blink {
      0%, 95%, 100% { height: 20px; }
      96%, 98% { height: 2px; }
    }
    .mouth {
      width: 50px;
      height: 10px;
      background: red;
      border-radius: 10px;
      position: absolute;
      bottom: 35px;
      left: 50%;
      transform: translateX(-50%);
      transition: height 0.2s ease;
    }
    .talking .mouth {
      height: 25px;
    }
    .mic-button {
      margin-top: 30px;
      width: 80px;
      height: 80px;
      background-color: #444;
      border: none;
      border-radius: 50%;
      background-image: url('https://img.icons8.com/ios-filled/50/ffffff/microphone.png');
      background-size: 50%;
      background-repeat: no-repeat;
      background-position: center;
      cursor: pointer;
      transition: background-color 0.3s;
      user-select: none;
    }
    .mic-button:active {
      background-color: #666;
    }
    .status {
      margin-top: 20px;
      font-size: 18px;
      color: #ccc;
    }
    .logs {
      margin-top: 20px;
      max-height: 200px;
      overflow-y: auto;
      background: #1a1a1a;
      padding: 10px;
      font-size: 14px;
      user-select:none;
    }
    select {
      margin-top: 10px;
      padding: 5px;
      background: #222;
      color: white;
      border: 1px solid #444;
      user-select:none;
    }
  </style>
</head>
<body>
  <h1>ğŸ¤ Sesli YZ Sohbet Botu</h1>
  <div class="avatar" id="avatar">
    <div class="face">
      <div class="eye left"></div>
      <div class="eye right"></div>
      <div class="mouth"></div>
    </div>
  </div>
  <div class="status" id="status">HazÄ±r</div>
  <button class="mic-button" id="micBtn" title="TÄ±kla/KonuÅŸ ve Tekrar TÄ±kla/Kapat"></button>
  <br>
  <select id="langSelect" title="Dil SeÃ§imi">
    <option value="tr-TR">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
    <option value="en-US">ğŸ‡ºğŸ‡¸ English</option>
    <option value="zh-CN">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ (Chinese)</option>
    <option value="de-DE">ğŸ‡©ğŸ‡ª Deutsch (German)</option>
    <option value="fr-FR">ğŸ‡«ğŸ‡· FranÃ§ais (French)</option>
    <option value="es-ES">ğŸ‡ªğŸ‡¸ EspaÃ±ol (Spanish)</option>
    <option value="ja-JP">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª (Japanese)</option>
    <option value="ru-RU">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹ (Russian)</option>
    <option value="ar-SA">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)</option>
    <option value="it-IT">ğŸ‡®ğŸ‡¹ Italiano (Italian)</option>
  </select>
  <div class="logs" id="logs"></div>

  <script>
    const micBtn = document.getElementById("micBtn");
    const statusText = document.getElementById("status");
    const logs = document.getElementById("logs");
    const langSelect = document.getElementById("langSelect");
    const avatar = document.getElementById("avatar");

    let recognition;
    let isRecording = false;

    // KonuÅŸma tanÄ±ma desteÄŸi kontrolÃ¼
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      alert("TarayÄ±cÄ±nÄ±z konuÅŸma tanÄ±mayÄ± desteklemiyor.");
    } else {
      recognition = new SpeechRecognition();
      recognition.continuous = false;
      recognition.interimResults = false;
    }

    // Avatar aÄŸÄ±z hareketi
    function startTalking() {
      avatar.classList.add("talking");
    }
    function stopTalking() {
      avatar.classList.remove("talking");
    }

    // Log ekle
    function addLog(who, text) {
      const div = document.createElement("div");
      div.innerHTML = `<b>${who}:</b> ${text}`;
      logs.appendChild(div);
      logs.scrollTop = logs.scrollHeight;
    }

    // Bot yanÄ±tÄ±
    function respond(message) {
      statusText.textContent = "ğŸ’¬ Cevap veriliyor...";
      startTalking();

      // Buraya API veya hazÄ±r cevap eklenebilir.
      // AÅŸaÄŸÄ±da Ã¶rnek basit cevaplar var, dilediÄŸin gibi deÄŸiÅŸtir.

      const lower = message.toLowerCase();

      let reply = "Seni tam anlayamadÄ±m.";

      if (lower.includes("merhaba")) reply = "Merhaba! NasÄ±lsÄ±n?";
      else if (lower.includes("adÄ±n ne")) reply = "Ben bir yapay zeka asistanÄ±yÄ±m.";
      else if (lower.includes("nasÄ±lsÄ±n")) reply = "HarikayÄ±m, teÅŸekkÃ¼r ederim!";
      else if (lower.includes("hava")) reply = "BugÃ¼n hava Ã§ok gÃ¼zel!";
      else if (lower.includes("teÅŸekkÃ¼r")) reply = "Rica ederim!";

      addLog("Bot", reply);

      // TTS konuÅŸma
      const utterance = new SpeechSynthesisUtterance(reply);
      utterance.lang = langSelect.value;

      utterance.onend = () => {
        stopTalking();
        statusText.textContent = "HazÄ±r";
      };
      speechSynthesis.speak(utterance);
    }

    // KonuÅŸma baÅŸlat/durdur
    function toggleRecognition() {
      if (isRecording) {
        recognition.stop();
      } else {
        recognition.lang = langSelect.value;
        recognition.start();
        statusText.textContent = "ğŸ§ Dinliyorum...";
      }
    }

    micBtn.addEventListener("click", () => {
      toggleRecognition();
    });

    recognition.onstart = () => {
      isRecording = true;
      statusText.textContent = "ğŸ§ Dinliyorum...";
    };

    recognition.onend = () => {
      isRecording = false;
      statusText.textContent = "â¹ï¸ Mikrofon kapalÄ±.";
    };

    recognition.onerror = (event) => {
      isRecording = false;
      statusText.textContent = `âš ï¸ Hata: ${event.error}`;
    };

    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      addLog("Sen", transcript);
      respond(transcript);
    };

    // KopyalamayÄ± engelle
    document.body.style.userSelect = "none";
    document.body.oncontextmenu = e => e.preventDefault();

  </script>
</body>
</html>
