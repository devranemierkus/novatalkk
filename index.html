<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Sesli YZ Sohbet Botu</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #101010;
      color: white;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .avatar {
      margin-top: 40px;
      position: relative;
      width: 150px;
      height: 150px;
      margin-left: auto;
      margin-right: auto;
    }
    .face {
      background: #222;
      border-radius: 50%;
      width: 100%;
      height: 100%;
      position: relative;
    }
    .eye {
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 40px;
      animation: blink 6s infinite;
    }
    .eye.left { left: 35px; }
    .eye.right { right: 35px; }
    @keyframes blink {
      0%, 95%, 100% { height: 20px; }
      96%, 98% { height: 2px; }
    }
    .mouth {
      width: 50px;
      height: 10px;
      background: red;
      border-radius: 10px;
      position: absolute;
      bottom: 35px;
      left: 50%;
      transform: translateX(-50%);
      transition: height 0.2s ease;
    }
    .talking .mouth {
      height: 25px;
    }
    .mic-button {
      margin-top: 30px;
      width: 80px;
      height: 80px;
      background-color: #444;
      border: none;
      border-radius: 50%;
      background-image: url('https://img.icons8.com/ios-filled/50/ffffff/microphone.png');
      background-size: 50%;
      background-repeat: no-repeat;
      background-position: center;
      cursor: pointer;
      transition: background-color 0.3s;
      user-select: none;
    }
    .mic-button:active {
      background-color: #666;
    }
    .status {
      margin-top: 20px;
      font-size: 18px;
      color: #ccc;
    }
    .logs {
      margin-top: 20px;
      max-height: 200px;
      overflow-y: auto;
      background: #1a1a1a;
      padding: 10px;
      font-size: 14px;
      user-select:none;
    }
    select {
      margin-top: 10px;
      padding: 5px;
      background: #222;
      color: white;
      border: 1px solid #444;
      user-select:none;
    }
  </style>
</head>
<body>
  <h1>🎤 Sesli YZ Sohbet Botu</h1>
  <div class="avatar" id="avatar">
    <div class="face">
      <div class="eye left"></div>
      <div class="eye right"></div>
      <div class="mouth"></div>
    </div>
  </div>
  <div class="status" id="status">Hazır</div>
  <button class="mic-button" id="micBtn" title="Tıkla/Konuş ve Tekrar Tıkla/Kapat"></button>
  <br>
  <select id="langSelect" title="Dil Seçimi">
    <option value="tr-TR">🇹🇷 Türkçe</option>
    <option value="en-US">🇺🇸 English</option>
    <option value="zh-CN">🇨🇳 中文 (Chinese)</option>
    <option value="de-DE">🇩🇪 Deutsch (German)</option>
    <option value="fr-FR">🇫🇷 Français (French)</option>
    <option value="es-ES">🇪🇸 Español (Spanish)</option>
    <option value="ja-JP">🇯🇵 日本語 (Japanese)</option>
    <option value="ru-RU">🇷🇺 Русский (Russian)</option>
    <option value="ar-SA">🇸🇦 العربية (Arabic)</option>
    <option value="it-IT">🇮🇹 Italiano (Italian)</option>
  </select>
  <div class="logs" id="logs"></div>

  <script>
    const micBtn = document.getElementById("micBtn");
    const statusText = document.getElementById("status");
    const logs = document.getElementById("logs");
    const langSelect = document.getElementById("langSelect");
    const avatar = document.getElementById("avatar");

    let recognition;
    let isRecording = false;

    // Konuşma tanıma desteği kontrolü
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      alert("Tarayıcınız konuşma tanımayı desteklemiyor.");
    } else {
      recognition = new SpeechRecognition();
      recognition.continuous = false;
      recognition.interimResults = false;
    }

    // Avatar ağız hareketi
    function startTalking() {
      avatar.classList.add("talking");
    }
    function stopTalking() {
      avatar.classList.remove("talking");
    }

    // Log ekle
    function addLog(who, text) {
      const div = document.createElement("div");
      div.innerHTML = `<b>${who}:</b> ${text}`;
      logs.appendChild(div);
      logs.scrollTop = logs.scrollHeight;
    }

    // Bot yanıtı
    function respond(message) {
      statusText.textContent = "💬 Cevap veriliyor...";
      startTalking();

      // Buraya API veya hazır cevap eklenebilir.
      // Aşağıda örnek basit cevaplar var, dilediğin gibi değiştir.

      const lower = message.toLowerCase();

      let reply = "Seni tam anlayamadım.";

      if (lower.includes("merhaba")) reply = "Merhaba! Nasılsın?";
      else if (lower.includes("adın ne")) reply = "Ben bir yapay zeka asistanıyım.";
      else if (lower.includes("nasılsın")) reply = "Harikayım, teşekkür ederim!";
      else if (lower.includes("hava")) reply = "Bugün hava çok güzel!";
      else if (lower.includes("teşekkür")) reply = "Rica ederim!";

      addLog("Bot", reply);

      // TTS konuşma
      const utterance = new SpeechSynthesisUtterance(reply);
      utterance.lang = langSelect.value;

      utterance.onend = () => {
        stopTalking();
        statusText.textContent = "Hazır";
      };
      speechSynthesis.speak(utterance);
    }

    // Konuşma başlat/durdur
    function toggleRecognition() {
      if (isRecording) {
        recognition.stop();
      } else {
        recognition.lang = langSelect.value;
        recognition.start();
        statusText.textContent = "🎧 Dinliyorum...";
      }
    }

    micBtn.addEventListener("click", () => {
      toggleRecognition();
    });

    recognition.onstart = () => {
      isRecording = true;
      statusText.textContent = "🎧 Dinliyorum...";
    };

    recognition.onend = () => {
      isRecording = false;
      statusText.textContent = "⏹️ Mikrofon kapalı.";
    };

    recognition.onerror = (event) => {
      isRecording = false;
      statusText.textContent = `⚠️ Hata: ${event.error}`;
    };

    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      addLog("Sen", transcript);
      respond(transcript);
    };

    // Kopyalamayı engelle
    document.body.style.userSelect = "none";
    document.body.oncontextmenu = e => e.preventDefault();

  </script>
</body>
</html>
